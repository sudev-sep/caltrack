<div class="container p-4  mt-4 mb-5" style="max-width: 768px";>


<div class="container-fluid p-4" style="background-color: #000000; min-height: 100vh;">

  <div class="d-flex justify-content-between align-items-center mb-4">
  <button class="btn border-0 p-0 text-white shadow-none" type="button" (click)="toggleMenu()">
    <i class="bi bi-list" style="font-size: 2.2rem;"></i>
  </button>
  
  <div class="rounded-circle bg-secondary bg-opacity-25 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
    <i class="bi bi-person-fill text-white-50"></i>
  </div>
</div>

<div class="offcanvas offcanvas-start border-0" 
     [ngClass]="{'show': isMenuOpen}" 
     [style.visibility]="isMenuOpen ? 'visible' : 'hidden'"
     tabindex="-1" 
     style="background-color: #171221; width: 280px; transition: transform 0.3s ease-in-out;">
  
  <div class="offcanvas-header border-bottom border-light border-opacity-10 p-4">
    <h5 class="offcanvas-title fw-bolder text-white d-flex align-items-center gap-2">
      <i class="bi bi-activity" style="color: #a78bfa;">C</i> CalTrack
    </h5>
    <button type="button" class="btn-close btn-close-white shadow-none" (click)="toggleMenu()"></button>
  </div>

  <div class="offcanvas-body p-4">
    <ul class="nav flex-column gap-3">


       <li class="nav-item">
        <a class="nav-link text-white fs-5 fw-semibold px-0 d-flex align-items-center gap-3" style="cursor: pointer;" (click)="navigateAndClose('/goalset')">
          <i class="bi bi-person-fill" style="color: #adaca7;"></i>profile</a>
      </li>


      <li class="nav-item">
        <a class="nav-link text-white fs-5 fw-semibold px-0 d-flex align-items-center gap-3" style="cursor: pointer;" (click)="navigateAndClose('/home')">
          <i class="bi bi-house-door-fill" style="color: #38bdf8;"></i> Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white fs-5 fw-semibold px-0 d-flex align-items-center gap-3" style="cursor: pointer;" (click)="navigateAndClose('/weekreport')">
          <i class="bi bi-bar-chart-fill" style="color: #fcd34d;"></i> Weekly Report
        </a>
      </li>

     

      <li class="nav-item mt-4 pt-4 border-top border-light border-opacity-10">
        <a class="nav-link text-danger fs-5 fw-semibold px-0 d-flex align-items-center gap-3" style="cursor: pointer;" (click)="logout(); toggleMenu()">
          <i class="bi bi-box-arrow-right"></i> Logout
        </a>
      </li>
    </ul>
  </div>
</div>

<div *ngIf="isMenuOpen" 
     class="offcanvas-backdrop fade show" 
     (click)="toggleMenu()"
     style="background-color: rgba(0,0,0,0.6);">
</div>


  

  <div class="d-flex align-items-center mb-5 gap-3">
    <h3 class="fw-bolder text-white mb-0">My Profile</h3>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <div *ngIf="!isLoading && profileData" class="fade-in">
    
<div class="glass-card text-center mb-4 position-relative">
  
  <button class="btn btn-outline-light position-absolute shadow-none d-flex align-items-center justify-content-center rounded-circle" 
          style="top: 15px; right: 15px; width: 36px; height: 36px; border-color: rgba(255,255,255,0.2);"
          (click)="navigateAndClose('/presetting')"
          title="Edit Profile">
    <i class="bi bi-pencil-fill" style="font-size: 0.9rem;"></i>
  </button>

  <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" 
       style="width: 90px; height: 90px; background-color: #2a223f; border: 2px solid #7c3aed;">
    <i class="bi bi-person-fill" style="font-size: 3.5rem; color: #a78bfa;"></i>
  </div>
  <h3 class="fw-bold text-white mb-1">@{{ profileData?.username || 'User' }}</h3>
  <p class="text-white-50 small mb-3">{{ profileData?.email || 'No email provided' }}</p>
  <span class="badge rounded-pill px-3 py-2" style="background-color: #261f38; color: #a78bfa;">
    Joined {{ profileData?.joined_at }}
  </span>

</div>
    <div class="row g-3 mb-4">
      <div class="col-6">
        <div class="glass-card text-center p-3">
          <i class="bi bi-rulers fs-3 mb-2 d-block" style="color: #38bdf8;"></i>
          <h4 class="fw-bold text-white mb-0">{{ profileData?.height }} <small class="fs-6 text-white-50">cm</small></h4>
          <span class="text-white-50 small">Height</span>
        </div>
      </div>
      <div class="col-6">
        <div class="glass-card text-center p-3">
          <i class="bi bi-speedometer fs-3 mb-2 d-block" style="color: #fcd34d;"></i>
          <h4 class="fw-bold text-white mb-0">{{ profileData?.weight }} <small class="fs-6 text-white-50">kg</small></h4>
          <span class="text-white-50 small">Weight</span>
        </div>
      </div>
      <div class="col-6">
        <div class="glass-card text-center p-3">
          <i class="bi bi-calendar-heart fs-3 mb-2 d-block" style="color: #fb7185;"></i>
          <h4 class="fw-bold text-white mb-0">{{ profileData?.age }} <small class="fs-6 text-white-50">yrs</small></h4>
          <span class="text-white-50 small">Age</span>
        </div>
      </div>
      <div class="col-6">
        <div class="glass-card text-center p-3">
          <i class="bi bi-gender-ambiguous fs-3 mb-2 d-block" style="color: #a78bfa;"></i>
          <h4 class="fw-bold text-white mb-0 text-capitalize">{{ profileData?.gender || 'N/A' }}</h4>
          <span class="text-white-50 small">Gender</span>
        </div>
      </div>
    </div>

    <div class="glass-card d-flex justify-content-between align-items-center mb-4 border-accent">
      <div class="d-flex align-items-center gap-3">
        <div class="rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px; background-color: rgba(124, 58, 237, 0.2);">
          <i class="bi bi-bullseye fs-4" style="color: #7c3aed;"></i>
        </div>
        <div>
          <h6 class="fw-bold text-white mb-0">Daily Goal</h6>
          <span class="text-white-50 small">Target Intake</span>
        </div>
      </div>
      <div class="text-end">
        <h4 class="fw-bold text-white mb-0">{{ profileData?.calorie_goal }}</h4>
        <span class="text-white-50 small">kcal</span>
      </div>
    </div>


  </div>
</div>

</div>